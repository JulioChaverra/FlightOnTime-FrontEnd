<!-- LOADING -->
<div *ngIf="loading" class="flex justify-center items-center h-64">
  <span class="text-text-secondary">Cargando detalles del vuelo...</span>
</div>

<!-- ERROR -->
<div *ngIf="error" class="text-red-400 text-center py-10">
  Error al cargar el vuelo
</div>

<!-- CONTENT -->
<div
  *ngIf="!loading && flight"
  class="max-w-[1200px] mx-auto px-4 md:px-10 py-8 space-y-8">

  <!-- BREADCRUMB -->
  <div class="flex items-center gap-2 text-sm text-text-secondary">
    <span>Inicio</span>
    <span>/</span>
    <span>Resultados</span>
    <span>/</span>
    <span class="text-text-primary font-medium">
      Vuelo {{ flight.vuelo }}
    </span>
  </div>

  <!-- HEADER -->
  <div class="flex flex-wrap justify-between items-end gap-4">
    <div>
      <h1 class="text-3xl md:text-4xl font-bold tracking-tight">
        {{ flight.ciudadOrigen }}
        <span class="text-text-secondary font-light mx-2">→</span>
        {{ flight.ciudadDestino }}
      </h1>
      <p class="text-text-secondary mt-1">
        Vuelo {{ flight.vuelo }} • {{ flight.aerolinea }}
      </p>
    </div>

    <div
      class="flex items-center gap-2 px-3 py-1.5 rounded-full
             bg-emerald-500/10 border border-emerald-500/20">
      <span class="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></span>
      <span class="text-emerald-400 text-sm font-medium">
        Programado
      </span>
    </div>
  </div>

  <!-- GRID PRINCIPAL -->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

 <!-- IZQUIERDA -->
    <div class="lg:col-span-2 space-y-6">

      <!-- HERO / TIMELINE -->
      <div class="relative overflow-hidden rounded-xl card min-h-[280px]">

        <!-- Imagen -->
        <div
          class="absolute inset-0 bg-cover bg-center opacity-40"
          style="background-image:url('assets/fondo-vuelo.png')">
        </div>

        <!-- Blur -->
        <div class="absolute inset-0 backdrop-blur-sm"></div>

        <!-- Gradient (oscuro abajo → claro arriba) -->
  <div
  class="absolute inset-0 bg-gradient-to-t
         from-background/90
         via-background/50
         to-transparent">
</div>


        <!-- Contenido -->
        <div
          class="relative z-10 flex justify-center items-center h-full
                 px-6 pt-14 pb-10 translate-y-4">

          <div
            class="flex w-full max-w-2xl items-center justify-between text-center">

            <!-- ORIGEN -->
            <div class="flex flex-col items-center gap-2">
              <div class="text-4xl md:text-5xl font-black">
                {{ flight.origenIata }}
              </div>
              <div
                class="text-sm text-text-secondary bg-black/40
                       px-2 py-0.5 rounded backdrop-blur">
                {{ flight.horaSalida | date:'HH:mm' }}
              </div>
            </div>

            <!-- LINEA + DURACIÓN -->
            <div class="flex-1 mx-8 relative flex flex-col items-center">
              <div class="w-full h-[2px] bg-border"></div>

              <!-- Avión -->
              <div
                class="absolute -top-4 flex justify-center items-center">
                <div
                  class="bg-primary p-2 rounded-full
                         shadow-lg shadow-primary/30">
                  <span
                    class="material-symbols-outlined rotate-90 text-white">
                    flight
                  </span>
                </div>
              </div>

              <!-- Duración -->
              <div
                class="mt-6 text-xs text-text-secondary
                       bg-black/40 px-3 py-1 rounded-full backdrop-blur">
                Duración: {{ duracionHoras }}h {{ duracionMinutos }}m
              </div>
            </div>

            <!-- DESTINO -->
            <div class="flex flex-col items-center gap-2">
              <div class="text-4xl md:text-5xl font-black">
                {{ flight.destinoIata }}
              </div>
              <div
                class="text-sm text-text-secondary bg-black/40
                       px-2 py-0.5 rounded backdrop-blur">
                {{ flight.horaLlegada | date:'HH:mm' }}
              </div>
            </div>

          </div>
        </div>
      </div>

      <!-- ORIGEN / DESTINO -->
      <div class="grid md:grid-cols-2 gap-4">
        <!-- ORIGEN -->
        <div class="card p-6">
          <div class="flex items-center gap-3 mb-4">
            <span class="material-symbols-outlined text-primary">
              flight_takeoff
            </span>
            <h3 class="text-lg font-bold">Origen</h3>
          </div>

          <p class="text-xs text-text-secondary uppercase">Aeropuerto</p>
          <p class="font-medium">{{ flight.origen }}</p>

          <p class="text-xs text-text-secondary uppercase mt-4">Ciudad</p>
          <p class="font-medium">
            {{ flight.ciudadOrigen }}, {{ flight.paisOrigen }}
          </p>

          <p class="text-xs text-text-secondary uppercase mt-4">Fecha</p>
          <p class="font-medium">
            {{ flight.horaSalida | date:'EEEE, d MMMM y' }}
          </p>
        </div>

        <!-- DESTINO -->
        <div class="card p-6">
          <div class="flex items-center gap-3 mb-4">
            <span class="material-symbols-outlined text-primary">
              flight_land
            </span>
            <h3 class="text-lg font-bold">Destino</h3>
          </div>

          <p class="text-xs text-text-secondary uppercase">Aeropuerto</p>
          <p class="font-medium">{{ flight.destino }}</p>

          <p class="text-xs text-text-secondary uppercase mt-4">Ciudad</p>
          <p class="font-medium">
            {{ flight.ciudadDestino }}, {{ flight.paisDestino }}
          </p>

          <p class="text-xs text-text-secondary uppercase mt-4">Fecha</p>
          <p class="font-medium">
            {{ flight.horaLlegada | date:'EEEE, d MMMM y' }}
          </p>
        </div>
      </div>
    </div>

    <!-- DERECHA -->
    <div class="space-y-6">

      <!-- PREDICCIÓN -->
      <div
        class="card p-6 border-2 border-primary/20
               shadow-lg relative overflow-hidden">

        <span
          class="material-symbols-outlined absolute top-4 right-4
                 text-8xl text-primary opacity-10">
          online_prediction
        </span>

        <h3 class="text-xl font-bold mb-4">
          Predicción de Retraso
        </h3>

        <div
          class="flex justify-between items-center p-4
                 bg-black/30 rounded-lg">
          <div>
            <p class="text-sm text-text-secondary">
              Estado previsto
            </p>
            <p class="text-emerald-400 font-bold">
              A Tiempo
            </p>
          </div>

          <div class="h-10 w-px bg-border"></div>

          <div class="text-right">
            <p class="text-sm text-text-secondary">
              Probabilidad
            </p>
            <p class="text-2xl font-black">
              92%
            </p>
          </div>
        </div>

        <button class="btn-primary w-full mt-4">
          <span class="material-symbols-outlined">refresh</span>
          Actualizar análisis
        </button>
      </div>

      <!-- CLIMA -->
      <div class="card p-6">
        <h3 class="text-lg font-bold flex items-center gap-2 mb-4">
          <span class="material-symbols-outlined text-primary">
            thermostat
          </span>
          Estado del Clima
        </h3>

        <div
          class="flex justify-between items-center
                 bg-black/30 p-4 rounded-lg">
          <div>
            <p class="text-xs text-text-secondary uppercase">
              {{ flight.destinoIata }} • {{ flight.ciudadDestino }}
            </p>
            <p class="font-bold">
              {{ flight.climaActual.temperature }} °C
            </p>
          </div>

          <div class="text-right">
            <p class="text-xs text-text-secondary">
              Viento
            </p>
            <p class="font-medium">
              {{ flight.climaActual.windSpeed }} km/h
            </p>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
